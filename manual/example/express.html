<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">Example</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  
  
  
  
  <script src="script/manual.js"></script>
<script data-ice="userScript" src="user/script/0-highlight.pack.js"></script>
<link data-ice="userStyle" rel="stylesheet" href="user/css/0-style.css">
<link rel="icon" type="image/png" sizes="32x32" href="manual/asset/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="manual/asset/favicon-16x16.png">
<body class="layout-container manual-root" data-ice="rootContainer">

<header><a href="./" class="myrmex-home">Myrmex</a>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/myrmx/myrmex" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual" data-toc-name="installation">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-installation" data-section-count="&#x25A0;&#x25A0;&#x25A0;" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html" data-ice="link">Getting started</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#configuring-aws" data-ice="link">Configuring AWS</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#prerequisites" data-ice="link">Prerequisites</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#permissions-needed-to-deploy-the-project-in-aws" data-ice="link">Permissions needed to deploy the project in AWS</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#installation" data-ice="link">Installation</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#installing-the-myrmex-command-line" data-ice="link">Installing the Myrmex command line</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#creating-a-new-project" data-ice="link">Creating a new project</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#installing-plugins" data-ice="link">Installing plugins</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#project-configuration" data-ice="link">Project configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#the-myrmex-json-file" data-ice="link">The myrmex.json file</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#splitting-the-configuration-into-various-files" data-ice="link">Splitting the configuration into various files</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#using-environment-variables-to-override-the-configuration" data-ice="link">Using environment variables to override the configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#defining-the-configuration-programmatically" data-ice="link">Defining the configuration programmatically</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="usage">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-usage" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html" data-ice="link">IAM plugin</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#prerequisites" data-ice="link">Prerequisites</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#installation" data-ice="link">Installation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#commands" data-ice="link">Commands</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#create-policy" data-ice="link">create-policy</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#create-role" data-ice="link">create-role</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#deploy-policies" data-ice="link">deploy-policies</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#deploy-roles" data-ice="link">deploy-roles</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#definition-of-iam-policies" data-ice="link">Definition of IAM policies</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#definition-of-iam-roles" data-ice="link">Definition of IAM roles</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#integration-with-myrmex-api-gateway-" data-ice="link">Integration with @myrmex/api-gateway</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#simplify-the-association-of-an-api-endpoint-with-its-invocation-role" data-ice="link">Simplify the association of an API endpoint with its invocation role</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#new-behavior-for-the-option-role-role-of-myrmex-create-endpoint-" data-ice="link">New behavior for the option --role &lt;role&gt; of myrmex create-endpoint</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#integration-with-myrmex-lambda-" data-ice="link">Integration with @myrmex/lambda</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#simplify-the-association-of-a-lambda-with-its-execution-role" data-ice="link">Simplify the association of a Lambda with its execution role</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#new-behavior-for-the-option-role-role-of-myrmex-create-lambda-" data-ice="link">New behavior for the option --role &lt;role&gt; of myrmex create-lambda</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#hooks-and-extensions" data-ice="link">Hooks and extensions</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#hooks" data-ice="link">Hooks</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#extensions" data-ice="link">Extensions</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-usage" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;&#x25A0;" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html" data-ice="link">Lambda plugin</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#prerequisites" data-ice="link">Prerequisites</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#installation" data-ice="link">Installation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#project-anatomy" data-ice="link">Project anatomy</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#configuration" data-ice="link">Configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#default-values" data-ice="link">Default values</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#-lambda-lambdaspath-" data-ice="link">lambda.lambdasPath</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#-lambda-modulespath-" data-ice="link">lambda.modulesPath</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#-lambda-alias-" data-ice="link">lambda.alias</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#example" data-ice="link">Example</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#commands" data-ice="link">Commands</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#create-lambda" data-ice="link">create-lambda</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#create-node-module" data-ice="link">create-node-module</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#deploy-lambdas" data-ice="link">deploy-lambdas</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#install-lambdas-locally" data-ice="link">install-lambdas-locally</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#test-lambda-locally" data-ice="link">test-lambda-locally</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#test-lambda" data-ice="link">test-lambda</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#integration-with-myrmex-api-gateway-" data-ice="link">Integration with @myrmex/api-gateway</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#associate-a-lambda-with-an-api-endpoint" data-ice="link">Associate a Lambda with an API endpoint</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#new-option-for-myrmex-create-endpoint-" data-ice="link">New option for myrmex create-endpoint</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#new-options-for-myrmex-deploy-apis-" data-ice="link">New options for myrmex deploy-apis</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#-deploy-lambdas-all-partial-none-" data-ice="link">--deploy-lambdas &lt;all|partial|none&gt;</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#-alias-alias-" data-ice="link">--alias &lt;alias&gt;</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-usage" data-section-count="&#x25A0;&#x25A0;&#x25A0;" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html" data-ice="link">API Gateway Plugin</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#prerequisites" data-ice="link">Prerequisites</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#installation" data-ice="link">Installation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#project-anatomy" data-ice="link">Project anatomy</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#commands" data-ice="link">Commands</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#create-api" data-ice="link">create-api</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#create-model" data-ice="link">create-model</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#create-endpoint" data-ice="link">create-endpoint</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#inspect-api" data-ice="link">inspect-api</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#inspect-endpoint" data-ice="link">inspect-endpoint</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#deploy-apis" data-ice="link">deploy-apis</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-usage" data-section-count="&#x25A0;&#x25A0;" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html" data-ice="link">CORS Plugin</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#prerequisites" data-ice="link">Prerequisites</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#installation" data-ice="link">Installation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#principle" data-ice="link">Principle</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#configuration" data-ice="link">Configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#global-configuration" data-ice="link">Global configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#api-level-configuration" data-ice="link">API level configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#resource-path-level-configuration" data-ice="link">Resource path level configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#api-resource-path-level-configuration" data-ice="link">API resource path level configuration</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="advanced">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-advanced" data-section-count="&#x25A0;&#x25A0;" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html" data-ice="link">Creating plugins</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#plugin-definition" data-ice="link">Plugin definition</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#anatomy-of-a-plugin" data-ice="link">Anatomy of a plugin</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#the-myrmex-instance" data-ice="link">The Myrmex instance</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#initialization-by-the-myrmex-command-line" data-ice="link">Initialization by the Myrmex command line</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#registration-of-plugins" data-ice="link">Registration of plugins</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#events-mecanism" data-ice="link">Events mecanism</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#extensions" data-ice="link">Extensions</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="example">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-example" data-section-count="&#x25A0;&#x25A0;" data-link="manual/example/express.html"><a href="manual/example/express.html" data-ice="link">Deploying an Express application in Lambda</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/express.html"><a href="manual/example/express.html#starting-with-an-express-application" data-ice="link">Starting with an Express application</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/express.html"><a href="manual/example/express.html#adding-myrmex-to-the-project" data-ice="link">Adding Myrmex to the project</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/express.html"><a href="manual/example/express.html#install-myrmex-in-the-express-project" data-ice="link">Install Myrmex in the Express project</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/express.html"><a href="manual/example/express.html#creation-of-iam-roles" data-ice="link">Creation of IAM roles</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/express.html"><a href="manual/example/express.html#creation-of-the-lambda" data-ice="link">Creation of the Lambda</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/express.html"><a href="manual/example/express.html#creation-of-the-api" data-ice="link">Creation of the API</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/express.html"><a href="manual/example/express.html#deployment" data-ice="link">Deployment</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-example" data-section-count="&#x25A0;" data-link="manual/example/lambda-profiling.html"><a href="manual/example/lambda-profiling.html" data-ice="link">Creating Lambdas to inspect their execution environment</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/lambda-profiling.html"><a href="manual/example/lambda-profiling.html#creation-of-three-lambdas-sharing-the-same-code" data-ice="link">Creation of three Lambdas sharing the same code</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/lambda-profiling.html"><a href="manual/example/lambda-profiling.html#testing-the-lambdas-in-aws" data-ice="link">Testing the Lambdas in AWS</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-example" data-section-count="&#x25A0;&#x25A0;&#x25A0;" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html" data-ice="link">Creating APIs for a space delivery company</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#the-need-one-application-several-apis-exposing-various-functionalities" data-ice="link">The need: one application, several APIs exposing various functionalities</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#the-creation-of-the-application-with-myrmex" data-ice="link">The creation of the application with Myrmex</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#initialization-of-the-project" data-ice="link">Initialization of the project</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-lambda-containing-the-application-logic" data-ice="link">Creation of the Lambda containing the application logic</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-lambda-s-execution-role" data-ice="link">Creation of the Lambda&apos;s execution role</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-node-modules-that-can-be-packaged-in-the-lambda" data-ice="link">Creation of node modules that can be packaged in the Lambda</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-a-lambda" data-ice="link">Creation of a Lambda</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-endpoints-and-apis" data-ice="link">Creation of the endpoints and APIs</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-apis" data-ice="link">Creation of the APIs</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-invocation-role" data-ice="link">Creation of the invocation role</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-endpoints" data-ice="link">Creation of the endpoints</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#deployment" data-ice="link">Deployment</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#altogether" data-ice="link">Altogether</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="reference">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-reference" data-section-count="&#x25A0;" data-link="identifiers.html"><a href="identifiers.html" data-ice="link">Reference</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown">
  <div class="manual-breadcrumb-list">
    <a href="./manual/./index.html">Manual</a>
    <span>&#xBB;</span>
    <span data-ice="title">Example</span>
  </div>
  <div data-ice="content"><h1 id="deploying-an-express-application-in-lambda">Deploying an Express application in Lambda</h1>
<blockquote>
<p>This tutorial uses <code>express-generator</code> to quickly create a sample application. This sample application is not an API and serves static content but we do not
recommend to do that in a real case scenario. You should use <code>Express</code> with API Gateway and Lambda only for APIs.</p>
</blockquote>
<h2 id="starting-with-an-express-application">Starting with an Express application</h2>
<p>We will start by creating a basic Express application following <a href="https://expressjs.com/en/starter/generator.html">the documentation</a>.</p>
<pre><code class="shell"># Installation of express-generator
npm install express-generator -g
# Creation of a basic application
express --view=pug express-app
# Installation of dependencies
cd express-app &amp;&amp; npm install</code></pre>
<p>We start the application locally to check that everything works correctly.</p>
<pre><code class="shell">set DEBUG=express-app:* &amp; npm start</code></pre>
<p>Visit <a href="http://127.0.0.1:3000/">http://127.0.0.1:3000/</a> to check that the application runs correctly locally.</p>
<h2 id="adding-myrmex-to-the-project">Adding Myrmex to the project</h2>
<p>Be sure that the Myrmex cli is installed.</p>
<pre><code class="shell">npm install -g myrmex</code></pre>
<h3 id="install-myrmex-in-the-express-project">Install Myrmex in the Express project</h3>
<pre><code class="shell"># For the prompt &quot;What is your project name?&quot;, leave it empty, so Myrmex will be installed in the same directory that Express
# We will need the plugins @myrmex/iam @myrmex/api-gateway and @myrmex/lambda
myrmex new</code></pre>
<p>Myrmex and its plugins will be installed in the section <code>devDependencies</code> of the file <code>package.json</code>.</p>
<h3 id="creation-of-iam-roles">Creation of IAM roles</h3>
<p>We create two IAM roles: one to allow Lambda to write in cloudwatch and the other to allow API Gateway to invoke Lambda.</p>
<pre><code class="shell">myrmex create-role MyExpressAppLambdaExecution --model LambdaBasicExecutionRole
myrmex create-role MyExpressAppLambdaInvocation --model APIGatewayLambdaInvocation</code></pre>
<h3 id="creation-of-the-lambda">Creation of the Lambda</h3>
<p>We create a new Lambda managed by Myrmex.</p>
<pre><code class="shell">myrmex create-lambda serverless-express --runtime nodejs6.10 --timeout 30 --memory 256 --role MyExpressAppLambdaExecution</code></pre>
<p>We have to do a small alteration to the <code>package.json</code> of the Express application to tell node that <code>app.js</code> is the file that
has to be loaded when <code>require()</code> is used.</p>
<pre><code class="json">// in /package.json
{
  &quot;name&quot;: &quot;express-app&quot;,
  &quot;version&quot;: &quot;0.0.0&quot;,
  &quot;main&quot;: &quot;app.js&quot;,
  ...
}</code></pre>
<p>In the <code>package.json</code> of the Lambda, we define the Express application as a dependency</p>
<pre><code class="shell"># in /lambda/lambdas/serverless-express
npm install ../../.. --save</code></pre>
<p><a href="https://github.com/awslabs/aws-serverless-express">aws-serverless-express</a> is a npm package that wrap an Express application
to process requests from API Gateway with Lambda integration. We add it as a dependency of our Lambda.</p>
<pre><code class="shell"># in /lambda/lambdas/serverless-express
npm install aws-serverless-express --save</code></pre>
<p>Then we can alter the code of <code>index.js</code> from the Lambda to correctly expose the handler.</p>
<pre><code class="javascript">// in /lambda/lambdas/serverless-express/index.js
&apos;use strict&apos;;
const awsServerlessExpress = require(&apos;aws-serverless-express&apos;);
const app = require(&apos;express-app&apos;);
const server = awsServerlessExpress.createServer(app);

exports.handler = (event, context) =&gt; awsServerlessExpress.proxy(server, event, context);</code></pre>
<h3 id="creation-of-the-api">Creation of the API</h3>
<p>We create an API with two endpoints using <code>ANY</code> method and Lambda proxy integration: one to handle the root url, and another
for the rest.</p>
<pre><code class="shell">myrmex create-api serverless-express --title &quot;Serverless Express&quot; --desc &quot;An Express application served by API Gateway and Lambda&quot;
myrmex create-endpoint / ANY --apis serverless-express --summary &quot;Proxy to Lambda&quot; --auth none --integration lambda-proxy --lambda serverless-express --role MyExpressAppLambdaInvocation
myrmex create-endpoint /{proxy+} ANY --apis serverless-express --summary &quot;Proxy to Lambda&quot; --auth none --integration lambda-proxy --lambda serverless-express --role MyExpressAppLambdaInvocation</code></pre>
<h3 id="deployment">Deployment</h3>
<pre><code class="shell">myrmex deploy-apis serverless-express --region us-east-1 --environment DEV --stage v0 --deploy-lambdas all --alias &quot;&quot;</code></pre>
<p>The deployment messages will give you the url of the application. It will have the form
<code>https://{your-api-id}.execute-api.us-east-1.amazonaws.com/v0</code>.
You can test the root url and the url <code>https://{your-api-id}.execute-api.us-east-1.amazonaws.com/v0/users</code> that is also
declared in the sample application generated by <code>express-generator</code>. You can also test some bad urls and observe that you
receive an error 404.</p>
</div>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script>hljs.initHighlightingOnLoad();</script></head>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
