<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">Advanced</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  
  
  
  
  <script src="script/manual.js"></script>
<script data-ice="userScript" src="user/script/0-highlight.pack.js"></script>
<link data-ice="userStyle" rel="stylesheet" href="user/css/0-style.css">
<link rel="icon" type="image/png" sizes="32x32" href="manual/asset/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="manual/asset/favicon-16x16.png">
<body class="layout-container manual-root" data-ice="rootContainer">

<header><a href="./" class="myrmex-home">Myrmex</a>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/myrmx/myrmex" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual" data-toc-name="installation">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-installation" data-section-count="&#x25A0;&#x25A0;&#x25A0;" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html" data-ice="link">Getting started</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#configuring-aws" data-ice="link">Configuring AWS</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#prerequisites" data-ice="link">Prerequisites</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#permissions-needed-to-deploy-the-project-in-aws" data-ice="link">Permissions needed to deploy the project in AWS</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#installation" data-ice="link">Installation</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#installing-the-myrmex-command-line" data-ice="link">Installing the Myrmex command line</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#creating-a-new-project" data-ice="link">Creating a new project</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#installing-plugins" data-ice="link">Installing plugins</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#project-configuration" data-ice="link">Project configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#the-myrmex-json-file" data-ice="link">The myrmex.json file</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#splitting-the-configuration-into-various-files" data-ice="link">Splitting the configuration into various files</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#using-environment-variables-to-override-the-configuration" data-ice="link">Using environment variables to override the configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#defining-the-configuration-programmatically" data-ice="link">Defining the configuration programmatically</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="usage">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-usage" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html" data-ice="link">IAM plugin</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#prerequisites" data-ice="link">Prerequisites</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#installation" data-ice="link">Installation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#commands" data-ice="link">Commands</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#create-policy" data-ice="link">create-policy</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#create-role" data-ice="link">create-role</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#deploy-policies" data-ice="link">deploy-policies</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#deploy-roles" data-ice="link">deploy-roles</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#definition-of-iam-policies" data-ice="link">Definition of IAM policies</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#definition-of-iam-roles" data-ice="link">Definition of IAM roles</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#integration-with-myrmex-api-gateway-" data-ice="link">Integration with @myrmex/api-gateway</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#simplify-the-association-of-an-api-endpoint-with-its-invocation-role" data-ice="link">Simplify the association of an API endpoint with its invocation role</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#new-behavior-for-the-option-role-role-of-myrmex-create-endpoint-" data-ice="link">New behavior for the option --role &lt;role&gt; of myrmex create-endpoint</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#integration-with-myrmex-lambda-" data-ice="link">Integration with @myrmex/lambda</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#simplify-the-association-of-a-lambda-with-its-execution-role" data-ice="link">Simplify the association of a Lambda with its execution role</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#new-behavior-for-the-option-role-role-of-myrmex-create-lambda-" data-ice="link">New behavior for the option --role &lt;role&gt; of myrmex create-lambda</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#hooks-and-extensions" data-ice="link">Hooks and extensions</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#hooks" data-ice="link">Hooks</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#extensions" data-ice="link">Extensions</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-usage" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;&#x25A0;" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html" data-ice="link">Lambda plugin</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#prerequisites" data-ice="link">Prerequisites</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#installation" data-ice="link">Installation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#project-anatomy" data-ice="link">Project anatomy</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#configuration" data-ice="link">Configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#default-values" data-ice="link">Default values</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#-lambda-lambdaspath-" data-ice="link">lambda.lambdasPath</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#-lambda-modulespath-" data-ice="link">lambda.modulesPath</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#-lambda-alias-" data-ice="link">lambda.alias</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#example" data-ice="link">Example</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#commands" data-ice="link">Commands</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#create-lambda" data-ice="link">create-lambda</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#create-node-module" data-ice="link">create-node-module</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#deploy-lambdas" data-ice="link">deploy-lambdas</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#install-lambdas-locally" data-ice="link">install-lambdas-locally</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#test-lambda-locally" data-ice="link">test-lambda-locally</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#test-lambda" data-ice="link">test-lambda</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#integration-with-myrmex-api-gateway-" data-ice="link">Integration with @myrmex/api-gateway</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#associate-a-lambda-with-an-api-endpoint" data-ice="link">Associate a Lambda with an API endpoint</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#new-option-for-myrmex-create-endpoint-" data-ice="link">New option for myrmex create-endpoint</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#new-options-for-myrmex-deploy-apis-" data-ice="link">New options for myrmex deploy-apis</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#-deploy-lambdas-all-partial-none-" data-ice="link">--deploy-lambdas &lt;all|partial|none&gt;</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#-alias-alias-" data-ice="link">--alias &lt;alias&gt;</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-usage" data-section-count="&#x25A0;&#x25A0;&#x25A0;" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html" data-ice="link">API Gateway Plugin</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#prerequisites" data-ice="link">Prerequisites</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#installation" data-ice="link">Installation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#project-anatomy" data-ice="link">Project anatomy</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#commands" data-ice="link">Commands</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#create-api" data-ice="link">create-api</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#create-model" data-ice="link">create-model</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#create-endpoint" data-ice="link">create-endpoint</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#inspect-api" data-ice="link">inspect-api</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#inspect-endpoint" data-ice="link">inspect-endpoint</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#deploy-apis" data-ice="link">deploy-apis</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-usage" data-section-count="&#x25A0;&#x25A0;" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html" data-ice="link">CORS Plugin</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#prerequisites" data-ice="link">Prerequisites</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#installation" data-ice="link">Installation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#principle" data-ice="link">Principle</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#configuration" data-ice="link">Configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#global-configuration" data-ice="link">Global configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#api-level-configuration" data-ice="link">API level configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#resource-path-level-configuration" data-ice="link">Resource path level configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#api-resource-path-level-configuration" data-ice="link">API resource path level configuration</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="advanced">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-advanced" data-section-count="&#x25A0;&#x25A0;" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html" data-ice="link">Creating plugins</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#plugin-definition" data-ice="link">Plugin definition</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#anatomy-of-a-plugin" data-ice="link">Anatomy of a plugin</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#the-myrmex-instance" data-ice="link">The Myrmex instance</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#initialization-by-the-myrmex-command-line" data-ice="link">Initialization by the Myrmex command line</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#registration-of-plugins" data-ice="link">Registration of plugins</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#events-mecanism" data-ice="link">Events mecanism</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#extensions" data-ice="link">Extensions</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="example">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-example" data-section-count="&#x25A0;&#x25A0;" data-link="manual/example/express.html"><a href="manual/example/express.html" data-ice="link">Deploying an Express application in Lambda</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/express.html"><a href="manual/example/express.html#starting-with-an-express-application" data-ice="link">Starting with an Express application</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/express.html"><a href="manual/example/express.html#adding-myrmex-to-the-project" data-ice="link">Adding Myrmex to the project</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/express.html"><a href="manual/example/express.html#install-myrmex-in-the-express-project" data-ice="link">Install Myrmex in the Express project</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/express.html"><a href="manual/example/express.html#creation-of-iam-roles" data-ice="link">Creation of IAM roles</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/express.html"><a href="manual/example/express.html#creation-of-the-lambda" data-ice="link">Creation of the Lambda</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/express.html"><a href="manual/example/express.html#creation-of-the-api" data-ice="link">Creation of the API</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/express.html"><a href="manual/example/express.html#deployment" data-ice="link">Deployment</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-example" data-section-count="&#x25A0;" data-link="manual/example/lambda-profiling.html"><a href="manual/example/lambda-profiling.html" data-ice="link">Creating Lambdas to inspect their execution environment</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/lambda-profiling.html"><a href="manual/example/lambda-profiling.html#creation-of-three-lambdas-sharing-the-same-code" data-ice="link">Creation of three Lambdas sharing the same code</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/lambda-profiling.html"><a href="manual/example/lambda-profiling.html#testing-the-lambdas-in-aws" data-ice="link">Testing the Lambdas in AWS</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-example" data-section-count="&#x25A0;&#x25A0;&#x25A0;" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html" data-ice="link">Creating APIs for a space delivery company</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#the-need-one-application-several-apis-exposing-various-functionalities" data-ice="link">The need: one application, several APIs exposing various functionalities</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#the-creation-of-the-application-with-myrmex" data-ice="link">The creation of the application with Myrmex</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#initialization-of-the-project" data-ice="link">Initialization of the project</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-lambda-containing-the-application-logic" data-ice="link">Creation of the Lambda containing the application logic</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-lambda-s-execution-role" data-ice="link">Creation of the Lambda&apos;s execution role</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-node-modules-that-can-be-packaged-in-the-lambda" data-ice="link">Creation of node modules that can be packaged in the Lambda</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-a-lambda" data-ice="link">Creation of a Lambda</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-endpoints-and-apis" data-ice="link">Creation of the endpoints and APIs</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-apis" data-ice="link">Creation of the APIs</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-invocation-role" data-ice="link">Creation of the invocation role</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-endpoints" data-ice="link">Creation of the endpoints</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#deployment" data-ice="link">Deployment</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#altogether" data-ice="link">Altogether</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="reference">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-reference" data-section-count="&#x25A0;" data-link="identifiers.html"><a href="identifiers.html" data-ice="link">Reference</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown">
  <div class="manual-breadcrumb-list">
    <a href="./manual/./index.html">Manual</a>
    <span>&#xBB;</span>
    <span data-ice="title">Advanced</span>
  </div>
  <div data-ice="content"><h1 id="creating-plugins">Creating plugins</h1>
<h2 id="plugin-definition">Plugin definition</h2>
<p>The Myrmex core is the node module <code>@myrmex/core</code>. It exports an object (referred as the <em>Myrmex instance</em>) that is based on
<a href="https://github.com/AlexisNo/pebo#readme">Pebo</a> that is a kind of event emitter.</p>
<p>Myrmex plugins use the <em>Myrmex instance</em> to interact with each other. A Myrmex plugin can be published on npm to be used by
anyone, or it can be a project specific plugin.</p>
<p>Myrmex plugins can make use of the following functionalities:</p>
<ul>
<li>Listen for events fired by other plugins</li>
<li>Fire events that can be listened by other plugins</li>
<li>Attach functions to the <em>Myrmex instance</em> (refered as <em>extensions</em>)</li>
</ul>
<h3 id="anatomy-of-a-plugin">Anatomy of a plugin</h3>
<p>A plugin is node module that exports an object that has to respect a specific structure to be used by the <em>Myrmex instance</em>.</p>
<p>Here is a quick overview of an object exported by a Myrmex plugin.</p>
<pre><code class="javascript">{
  // An unique identifier that should be carefully chosen to not enter in conflict with other plugins
  name: `my-plugin-identifier`,
  version: `0.0.0`,

  // If the plugin is configurable, this place is suggested to define default values
  // This configuration can be overwritten for a project in the file
  // `project-root/config/my-plugin-identifier.json`
  config: {                 // These values will be accessible using
    key1: &apos;defaultValue1&apos;,  // `myrmex.getConfig(&quot;my-plugin-identifier.key1&quot;)`
    key2: {                 // `myrmex.getConfig(&quot;my-plugin-identifier.key2&quot;)`
      a: &apos;defaultValue2A&apos;,  // `myrmex.getConfig(&quot;my-plugin-identifier.key2.a&quot;)`
      b: &apos;defaultValue2B&apos;   // `myrmex.getConfig(&quot;my-plugin-identifier.key2.b&quot;)`
    }
  },

  hooks: {
    // These functions are event listeners that will be called
    // when events &quot;eventNameA&quot; and &quot;eventNameB&quot; are fired by Myrmex
    // More details about events below
    eventNameA: function (argA, argB) {
      return Promise.resolve()
    },
    eventNameB: function () {
      return Promise.resolve()
    }
  ],

  extensions: {
    // These functions will be registered in the Myrmex instance
    // so they will be accessible by other plugins
    // More details about extensions below
    extensionNameA: function() {}
    extensionNameB: function() {}
  }
}</code></pre>
<h3 id="the-myrmex-instance">The Myrmex instance</h3>
<p>Before describing events and extensions, we should have a quick overview about the initialization of the <em>Myrmex instance</em> and
the registration of plugins.</p>
<h4 id="initialization-by-the-myrmex-command-line">Initialization by the Myrmex command line</h4>
<p>When the Myrmex command line is called. It checks if it is called from a Myrmex project by searching for a <code>package.json</code> file
containing a dependency to <code>@myrmex/core</code> in the current path.</p>
<p>Once a <code>@myrmex/core</code> module have been found, the Myrmex command line loads it and receives an object: the <em>Myrmex instance</em>.</p>
<p>The Myrmex command line then loads the project configuration (including the list of plugins) and applies it to the <em>Myrmex
instance</em>. Each plugin is loaded and registered in the <em>Myrmex instance</em>.</p>
<h4 id="registration-of-plugins">Registration of plugins</h4>
<p>When the <em>Myrmex instance</em> registers a plugin, it basically performs three operations:</p>
<ul>
<li>Checks if it there is a list of hooks and create the <em>event listeners</em>.</li>
<li>Checks if it there are <em>extensions</em> and add them to the Myrmex instance.</li>
<li>Create a reference of itself in a <code>myrmex</code> property that is added to the plugin.</li>
</ul>
<p>So, once a plugin has been registered by the <em>Myrmex instance</em>, it has a new <code>myrmex</code> property that contains the <em>Myrmex
instance</em>. It can be used to fire events or call <em>extensions</em> that have been provided by other plugins.</p>
<h3 id="events-mecanism">Events mecanism</h3>
<p>The event mecanism of Myrmex is designed to allow code injection and works with asynchronous operations.</p>
<p>From the <em>event emitter</em> point of view, when the <em>Myrmex instance</em> fires an event, it returns a promise of an array containing
the arguments of the event. These arguments have eventually been transformed by <em>event listeners</em>.</p>
<p>From the <em>event listener</em> point of view, when the listener function is called, it has the possibility to alter the parameters
of the event. If the event listener has to perform asynchronous operations to alter theses parameters, it should return a
Promise that resolves once the modification is done.</p>
<p>Therefore, an <em>emitter</em> can wait for all <em>listeners</em> to eventually alter the event parameters to continue its task.</p>
<p>Here is a dummy example:</p>
<pre><code class="javascript">// The Myrmex instance is accessible via the `myrmex` property of a plugin once it has been registered
const myrmex = require(&apos;./plugin-index.js&apos;).myrmex;

// Create an event listener
myrmex.when(&apos;MyEvent&apos;, (myArg1, myArg2) =&gt; {
  myArg.propB += &apos; transformed by an event listener&apos;;
  myArg.propC = &apos;property added by an event listener&apos;;
  return Promise.resolve();
});

// We define two objects that will be passed as the event arguments
// Passing literals is not recommended because JavaScript will copy them when passing them as arguments
// Myrmex would not be able to retrieve modifications applied to them
const eventArg1 = {
  propA: &apos;original property&apos;,
  propB: &apos;original property&apos;
}
const eventArg2 = {
  propA: &apos;original property&apos;
}

myrmex.fire(&apos;MyEvent&apos;, eventArg1, eventArg2)
.then(arg =&gt; {
  console.log(arg[0]);
  //  {
  //    propA: &apos;original property&apos;,
  //    propB: &apos;original property transformed by an event listener&apos;,
  //    propC: &apos;property added by an event listener&apos;
  //  }
  console.log(arg[1]);
  //  {
  //    propA: &apos;original property&apos;
  //  }
});</code></pre>
<p>Using this mecanism, Myrmex plugins can create their own events and listen for other plugins events. Several plugins can
listen for the same event and use and/or modify its arguments.</p>
<blockquote>
<p>For example, before configuring the integration request of API endpoints, the <code>@myrmex/api-gateway</code> plugin fires and event
that allows other plugins to be notified about it. Theses plugins have the opportunity to inject data in the event&apos;s argument
so the plugin <code>@myrmex/api-gateway</code> can generate a compete API specification.</p>
</blockquote>
<p>Note that it is not recommended to call <code>myrmex.when()</code> directly when writing a plugin. We prefer to use the <code>hooks</code> property
of the object exported by the plugin to organize the code and be sure that the listeners are attached to the events during
the registration of the plugin.</p>
<h3 id="extensions">Extensions</h3>
<p>@todo</p>
</div>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script>hljs.initHighlightingOnLoad();</script></head>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
