<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">Usage</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  
  
  
  
  <script src="script/manual.js"></script>
<script data-ice="userScript" src="user/script/0-highlight.pack.js"></script>
<link data-ice="userStyle" rel="stylesheet" href="user/css/0-style.css">
<link rel="icon" type="image/png" sizes="32x32" href="manual/asset/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="manual/asset/favicon-16x16.png">
<body class="layout-container manual-root" data-ice="rootContainer">

<header><a href="./" class="myrmex-home">Myrmex</a>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/myrmex-org/myrmex" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual" data-toc-name="installation">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-installation" data-section-count="&#x25A0;&#x25A0;&#x25A0;" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html" data-ice="link">Getting started</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#configuring-aws" data-ice="link">Configuring AWS</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#prerequisites" data-ice="link">Prerequisites</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#permissions-needed-to-deploy-the-project-in-aws" data-ice="link">Permissions needed to deploy the project in AWS</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#installation" data-ice="link">Installation</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#installing-the-myrmex-command-line" data-ice="link">Installing the Myrmex command line</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#creating-a-new-project" data-ice="link">Creating a new project</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#installing-plugins" data-ice="link">Installing plugins</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#project-configuration" data-ice="link">Project configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#the-myrmex-json-file" data-ice="link">The myrmex.json file</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#splitting-the-configuration-into-various-files" data-ice="link">Splitting the configuration into various files</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#using-environment-variables-to-override-the-configuration" data-ice="link">Using environment variables to override the configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation/getting-started.html"><a href="manual/installation/getting-started.html#defining-the-configuration-programmatically" data-ice="link">Defining the configuration programmatically</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="usage">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-usage" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html" data-ice="link">IAM plugin</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#prerequisites" data-ice="link">Prerequisites</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#installation" data-ice="link">Installation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#commands" data-ice="link">Commands</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#create-policy" data-ice="link">create-policy</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#create-role" data-ice="link">create-role</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#deploy-policies" data-ice="link">deploy-policies</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#deploy-roles" data-ice="link">deploy-roles</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#definition-of-iam-policies" data-ice="link">Definition of IAM policies</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#definition-of-iam-roles" data-ice="link">Definition of IAM roles</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#integration-with-myrmex-api-gateway-" data-ice="link">Integration with @myrmex/api-gateway</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#simplify-the-association-of-an-api-endpoint-with-its-invocation-role" data-ice="link">Simplify the association of an API endpoint with its invocation role</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#new-behavior-for-the-option-role-role-of-myrmex-create-endpoint-" data-ice="link">New behavior for the option --role &lt;role&gt; of myrmex create-endpoint</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#integration-with-myrmex-lambda-" data-ice="link">Integration with @myrmex/lambda</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#simplify-the-association-of-a-lambda-with-its-execution-role" data-ice="link">Simplify the association of a Lambda with its execution role</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#new-behavior-for-the-option-role-role-of-myrmex-create-lambda-" data-ice="link">New behavior for the option --role &lt;role&gt; of myrmex create-lambda</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#hooks-and-extensions" data-ice="link">Hooks and extensions</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#hooks" data-ice="link">Hooks</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/iam-plugin.html"><a href="manual/usage/iam-plugin.html#extensions" data-ice="link">Extensions</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-usage" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;&#x25A0;" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html" data-ice="link">Lambda plugin</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#prerequisites" data-ice="link">Prerequisites</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#installation" data-ice="link">Installation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#project-anatomy" data-ice="link">Project anatomy</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#configuration" data-ice="link">Configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#default-values" data-ice="link">Default values</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#-lambda-lambdaspath-" data-ice="link">lambda.lambdasPath</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#-lambda-modulespath-" data-ice="link">lambda.modulesPath</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#-lambda-alias-" data-ice="link">lambda.alias</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#example" data-ice="link">Example</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#commands" data-ice="link">Commands</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#create-lambda" data-ice="link">create-lambda</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#create-node-module" data-ice="link">create-node-module</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#deploy-lambdas" data-ice="link">deploy-lambdas</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#install-lambdas-locally" data-ice="link">install-lambdas-locally</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#test-lambda-locally" data-ice="link">test-lambda-locally</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#test-lambda" data-ice="link">test-lambda</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#integration-with-myrmex-api-gateway-" data-ice="link">Integration with @myrmex/api-gateway</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#associate-a-lambda-with-an-api-endpoint" data-ice="link">Associate a Lambda with an API endpoint</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#new-option-for-myrmex-create-endpoint-" data-ice="link">New option for myrmex create-endpoint</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#new-options-for-myrmex-deploy-apis-" data-ice="link">New options for myrmex deploy-apis</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#-deploy-lambdas-all-partial-none-" data-ice="link">--deploy-lambdas &lt;all|partial|none&gt;</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/usage/lambda-plugin.html"><a href="manual/usage/lambda-plugin.html#-alias-alias-" data-ice="link">--alias &lt;alias&gt;</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-usage" data-section-count="&#x25A0;&#x25A0;&#x25A0;" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html" data-ice="link">API Gateway Plugin</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#prerequisites" data-ice="link">Prerequisites</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#installation" data-ice="link">Installation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#project-anatomy" data-ice="link">Project anatomy</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#commands" data-ice="link">Commands</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#create-api" data-ice="link">create-api</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#create-model" data-ice="link">create-model</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#create-endpoint" data-ice="link">create-endpoint</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#inspect-api" data-ice="link">inspect-api</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#inspect-endpoint" data-ice="link">inspect-endpoint</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/api-gateway-plugin.html"><a href="manual/usage/api-gateway-plugin.html#deploy-apis" data-ice="link">deploy-apis</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-usage" data-section-count="&#x25A0;&#x25A0;" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html" data-ice="link">CORS Plugin</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#prerequisites" data-ice="link">Prerequisites</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#installation" data-ice="link">Installation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#principle" data-ice="link">Principle</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#configuration" data-ice="link">Configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#global-configuration" data-ice="link">Global configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#api-level-configuration" data-ice="link">API level configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#resource-path-level-configuration" data-ice="link">Resource path level configuration</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/usage/cors-plugin.html"><a href="manual/usage/cors-plugin.html#api-resource-path-level-configuration" data-ice="link">API resource path level configuration</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="advanced">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-advanced" data-section-count="&#x25A0;&#x25A0;" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html" data-ice="link">Creating plugins</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#plugin-definition" data-ice="link">Plugin definition</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#anatomy-of-a-plugin" data-ice="link">Anatomy of a plugin</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#the-myrmex-instance" data-ice="link">The Myrmex instance</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#initialization-by-the-myrmex-command-line" data-ice="link">Initialization by the Myrmex command line</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#registration-of-plugins" data-ice="link">Registration of plugins</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#events-mecanism" data-ice="link">Events mecanism</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/advanced/creating-plugins.html"><a href="manual/advanced/creating-plugins.html#extensions" data-ice="link">Extensions</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="example">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-example" data-section-count="&#x25A0;&#x25A0;" data-link="manual/example/express.html"><a href="manual/example/express.html" data-ice="link">Deploying an Express application in Lambda</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/express.html"><a href="manual/example/express.html#starting-with-an-express-application" data-ice="link">Starting with an Express application</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/express.html"><a href="manual/example/express.html#adding-myrmex-to-the-project" data-ice="link">Adding Myrmex to the project</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/express.html"><a href="manual/example/express.html#install-myrmex-in-the-express-project" data-ice="link">Install Myrmex in the Express project</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/express.html"><a href="manual/example/express.html#creation-of-iam-roles" data-ice="link">Creation of IAM roles</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/express.html"><a href="manual/example/express.html#creation-of-the-lambda" data-ice="link">Creation of the Lambda</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/express.html"><a href="manual/example/express.html#creation-of-the-api" data-ice="link">Creation of the API</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/express.html"><a href="manual/example/express.html#deployment" data-ice="link">Deployment</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-example" data-section-count="&#x25A0;" data-link="manual/example/lambda-profiling.html"><a href="manual/example/lambda-profiling.html" data-ice="link">Creating Lambdas to inspect their execution environment</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/lambda-profiling.html"><a href="manual/example/lambda-profiling.html#creation-of-three-lambdas-sharing-the-same-code" data-ice="link">Creation of three Lambdas sharing the same code</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/lambda-profiling.html"><a href="manual/example/lambda-profiling.html#testing-the-lambdas-in-aws" data-ice="link">Testing the Lambdas in AWS</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-example" data-section-count="&#x25A0;&#x25A0;&#x25A0;" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html" data-ice="link">Creating APIs for a space delivery company</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#the-need-one-application-several-apis-exposing-various-functionalities" data-ice="link">The need: one application, several APIs exposing various functionalities</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#the-creation-of-the-application-with-myrmex" data-ice="link">The creation of the application with Myrmex</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#initialization-of-the-project" data-ice="link">Initialization of the project</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-lambda-containing-the-application-logic" data-ice="link">Creation of the Lambda containing the application logic</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-lambda-s-execution-role" data-ice="link">Creation of the Lambda&apos;s execution role</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-node-modules-that-can-be-packaged-in-the-lambda" data-ice="link">Creation of node modules that can be packaged in the Lambda</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-a-lambda" data-ice="link">Creation of a Lambda</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-endpoints-and-apis" data-ice="link">Creation of the endpoints and APIs</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-apis" data-ice="link">Creation of the APIs</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-invocation-role" data-ice="link">Creation of the invocation role</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#creation-of-the-endpoints" data-ice="link">Creation of the endpoints</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#deployment" data-ice="link">Deployment</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/example/planet-express.html"><a href="manual/example/planet-express.html#altogether" data-ice="link">Altogether</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="reference">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-reference" data-section-count="&#x25A0;" data-link="identifiers.html"><a href="identifiers.html" data-ice="link">Reference</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown">
  <div class="manual-breadcrumb-list">
    <a href="./manual/./index.html">Manual</a>
    <span>&#xBB;</span>
    <span data-ice="title">Usage</span>
  </div>
  <div data-ice="content"><h1 id="iam-plugin">IAM plugin</h1>
<p>The IAM plugin allows to define and deploy AWS policies and roles. It can be used to avoid referencing IAM roles ARNs and
simplify the configuration of other plugins.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>To use the <code>@myrmex/iam</code> plugin, it is necessary to have a minimal knowledge about <a href="https://aws.amazon.com/iam/">AWS Identity and Access Management</a>.</p>
<p>An AWS user or role that uses the plugin <code>@myrmex/iam</code> must have access to IAM administration. The AWS policy <code>IAMFullAccess</code>
gives all necessary permissions.</p>
<h2 id="installation">Installation</h2>
<p>Install the npm module in a Myrmex project:</p>
<pre><code class="shell">npm install @myrmex/iam --save-dev</code></pre>
<p>Then enable the plugin in the <code>myrmex.json</code> file:</p>
<pre><code class="json">{
  &quot;name&quot;: &quot;my-app&quot;,
  &quot;plugins&quot;: [
    &quot;@myrmex/iam&quot;
  ]
}</code></pre>
<h2 id="commands">Commands</h2>
<h3 id="create-policy">create-policy</h3>
<p>Usage:</p>
<pre><code class="shell">create-policy [identifier]</code></pre>
<p>Create a new IAM policy in <code>iam/policies/&lt;identifier&gt;.json</code>. The command does not configure the policy but just prepare the
file in the right place. By default it is <code>iam/policies/&lt;identifier&gt;.json</code>.</p>
<h3 id="create-role">create-role</h3>
<p>Usage:</p>
<pre><code class="shell">create-role [options] [identifier]

  Options:
    -m, --model &lt;model-identifier&gt;       select a model to quickly create the role configuration
    -p, --policies &lt;policy-identifiers&gt;  select the policies to attach to the role</code></pre>
<p>Create a new IAM role. By default the location of roles is <code>iam/roles/&lt;identifier&gt;.json</code>.</p>
<p>Two predefined role configuration are available:</p>
<ul>
<li><code>APIGatewayLambdaInvocation</code>: The AWS policy <code>AWSLambdaRole</code> is attached to it and it can be associated to API Gateway
 endpoints.</li>
<li><code>LambdaBasicExecutionRole</code>: The AWS policy <code>AWSLambdaBasicExecutionRole</code> is attached to it and it can be associated to
 Lambda functions.</li>
</ul>
<p>It is possible to define custom policies and <code>trust-relationship</code> configuration. Is is also possible to reference
policies from the Myrmex project.</p>
<p>Roles can be referenced by other plugins to facilitate the deployment of Myrmex applications: by defining roles in the Myrmex
project, deploying some resources like Lambda functions or API definitions can be done on various environments without
needing to define specific configuration to reference different roles ARN.</p>
<h3 id="deploy-policies">deploy-policies</h3>
<p>Usage:</p>
<pre><code class="shell">deploy-policies [options] [policy-identifiers]

  Options:
    -e, --environment [environment]  An environment identifier that will be used as a prefix
    -s, --stage [stage]              A stage identifier that will be used as a suffix</code></pre>
<p>Deploy one or more policies in AWS. The <code>--environment</code> option is used as a prefix and the <code>--stage</code> option as a suffix.</p>
<h3 id="deploy-roles">deploy-roles</h3>
<p>Usage:</p>
<pre><code class="shell">deploy-roles [options] [role-identifiers]

  Options:
    -e, --environment [environment]  An environment identifier that will be used as a prefix
    -s, --stage [stage]              A stage identifier that will be used as a suffix</code></pre>
<p>Deploy one or more roles in AWS. The <code>environment</code> option is used as a prefix and the <code>stage</code> option as a suffix.</p>
<h2 id="definition-of-iam-policies">Definition of IAM policies</h2>
<p>The policies managed by Myrmex are nothing more than IAM policy definitions stored as JSON file. This allows to manage the
permissions needed by an application alongside the code.</p>
<p>Every time Myrmex has to deploy a policy, it checks if it needs to be created or updated and perform the appropriate action
if needed. If a policy already has 5 version (the maximum allowed by AWS), the oldest one will be deleted (unless it as been
defined as the default one).</p>
<h2 id="definition-of-iam-roles">Definition of IAM roles</h2>
<p>AWS roles can be configured with JSON files with <code>@myrmex/iam</code>. The structure looks like this:</p>
<pre><code class="json">{
  &quot;description&quot;: &quot;Description of the role&quot;,
  &quot;managed-policies&quot;: [
    &quot;&lt;policy-identifier&gt;&quot;
  ],
  &quot;inline-policies&quot;: [
    &quot;&lt;policy-definition&gt;&quot;
  ],
  &quot;trust-relationship&quot;: {
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [{
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Principal&quot;: {
        &quot;Service&quot;: &quot;&lt;service-identifier&gt;&quot;
      },
      &quot;Action&quot;: &quot;sts:AssumeRole&quot;
    }]
  }
}</code></pre>
<p>The <em>managed-policies</em> section contains a list of identifiers of IAM policies already deployed in AWS associated to the role.
During the deployment of a role, Myrmex will look for policies matching the identifiers in <em>managed-policies</em>, trying
combinations with the <em>environment</em> and the <em>stage</em> options:</p>
<ul>
<li><code>&lt;environment&gt;_&lt;identifier&gt;_&lt;stage&gt;</code></li>
<li><code>&lt;environment&gt;_&lt;identifier&gt;</code></li>
<li><code>&lt;identifier&gt;</code></li>
</ul>
<p>The <em>inline-policies</em> section contains a list of AIM policy definitions associated to the role.</p>
<p>The <em>trust-relationship</em> section contains the policy that describe the trusted entities that can assume the role</p>
<h2 id="integration-with-myrmex-api-gateway-">Integration with <code>@myrmex/api-gateway</code></h2>
<p><code>@myrmex/iam</code> add some functionalities to  <code>@myrmex/api-gateway</code> when both are installed in the same project.</p>
<h3 id="simplify-the-association-of-an-api-endpoint-with-its-invocation-role">Simplify the association of an API endpoint with its invocation role</h3>
<p>In the <a href="/manual/usage/api-gateway-plugin.html#project-anatomy"><code>spec.json</code></a> file that describes an endpoint, the invocation
role is configured via the [API Gateway extension to Swagger]
(<a href="http://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-swagger-extensions-integration.html">http://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-swagger-extensions-integration.html</a>) using the
property <code>credentials</code>. It accepts the ARN of an IAM role. Using <code>@myrmex/iam</code>, it is also possible configure this property
using the identifier of a role defined in the Myrmex project or the name of a role deployed in AWS.</p>
<h3 id="new-behavior-for-the-option-role-role-of-myrmex-create-endpoint-">New behavior for the option <code>--role &lt;role&gt;</code> of <code>myrmex create-endpoint</code></h3>
<p>This option normally accepts the ARN of a role. With the plugin <code>@myrmex/iam</code>, it also accepts the identifier of an role
defined in the Myrmex project or the name of a role deployed in AWS.</p>
<p>If the option is not provided in the command line, a prompt will propose three option to set the value:</p>
<ul>
<li>Select a role managed by the plugin @myrmex/iam</li>
<li>Select a role in your AWS account</li>
<li>Enter the value manually</li>
</ul>
<h2 id="integration-with-myrmex-lambda-">Integration with <code>@myrmex/lambda</code></h2>
<p><code>@myrmex/iam</code> add some functionalities to  <code>@myrmex/lambda</code> when both are installed in the same project.</p>
<h3 id="simplify-the-association-of-a-lambda-with-its-execution-role">Simplify the association of a Lambda with its execution role</h3>
<p>In the <a href="https://myrmex-org.github.io/manual/usage/lambda-plugin.html#project-anatomy"><code>config.json</code></a> file that describes the
configuration of a Lambda, the invocation role is configured via the using the property <code>params.role</code>. It accepts the ARN of
an IAM role. Using <code>@myrmex/iam</code>, it is also possible configure this property using the identifier of a role defined in the
Myrmex project or the name of a role deployed in AWS.</p>
<h3 id="new-behavior-for-the-option-role-role-of-myrmex-create-lambda-">New behavior for the option <code>--role &lt;role&gt;</code> of <code>myrmex create-lambda</code></h3>
<p>This option normally accepts the ARN of a role. With the plugin <code>@myrmex/iam</code>, it also accepts the identifier of an role
defined in the Myrmex project or the name of a role deployed in AWS.</p>
<p>If the option is not provided in the command line, a prompt will propose three option to set the value:</p>
<ul>
<li>Select a role managed by the plugin @myrmex/iam</li>
<li>Select a role in your AWS account</li>
<li>Enter the value manually</li>
</ul>
<h2 id="hooks-and-extensions">Hooks and extensions</h2>
<h3 id="hooks">Hooks</h3>
<p><code>beforePoliciesLoad()</code></p>
<p><code>beforePolicyLoad(definitionFilePath, name)</code></p>
<p><code>afterPolicyLoad(policy)</code></p>
<p><code>afterPoliciesLoad(policies)</code></p>
<p><code>beforeRolesLoad()</code></p>
<p><code>beforeRoleLoad(definitionFilePath, name)</code></p>
<p><code>afterRoleLoad(role)</code></p>
<p><code>afterRolesLoad(roles)</code></p>
<p><code>beforeDeployPolicy(policy)</code></p>
<p><code>beforeDeployRole(role)</code></p>
<h3 id="extensions">Extensions</h3>
<p><code>myrmex.call(&apos;iam:getRoles&apos;)</code> returns the roles managed in the current Myrmex project.</p>
<p><code>myrmex.call(&apos;iam:getAWSRole&apos;)</code> returns the roles available in AWS.</p>
<p><code>myrmex.call(&apos;iam:retrieveRoleArn&apos;, identifier, context)</code> retrieve the ARN of an IAM role using its identifier. Tries
combinations with the <code>environment</code> and the <code>stage</code> properties of the <code>context</code> parameter in this order:</p>
<ul>
<li><code>&lt;environment&gt;_&lt;identifier&gt;_&lt;stage&gt;</code></li>
<li><code>&lt;environment&gt;_&lt;identifier&gt;</code></li>
<li><code>&lt;identifier&gt;</code>.</li>
</ul>
</div>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script>hljs.initHighlightingOnLoad();</script></head>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
